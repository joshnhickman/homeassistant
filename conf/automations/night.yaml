- id: night_on
  alias: night on
  trigger:
    - platform: state
      entity_id: sensor.pixel_charger_type
      to: 'wireless'
  condition:
    - condition: state
      entity_id: person.josh
      state: 'home'
    - &night_condition
      condition: time
      before: '05:00:00'
      after: '21:00:00'
  action:
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.night
- id: night_off
  alias: night off
  trigger:
    - platform: state
      entity_id: sensor.pixel_charger_type
      from: 'wireless'
  condition:
    - condition: state
      entity_id: person.josh
      state: 'home'
    - condition: not
      conditions: 
        - *night_condition
          #- condition: time
          #before: '05:00:00'
          #after: '21:00:00'
  action:
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.night

        #- id: read_scene
        #  alias: read scene
        #  trigger: &night_on
        #    - platform: state
        #      entity_id: input_boolean.night
        #      to: 'on'
        #  action:
        #    - service: scene.turn_on
        #      data:
        #        entity_id: scene.read
        #        transition: 15
        #- id: read_scene_off
        #  alias: read scene off
        #  trigger:
        #    - platform: state
        #      entity_id: input_boolean.night
        #      to: 'on'
        #      for: 00:30:00
        #  action:
        #    service: light.turn_off
        #    data:
        #      entity_id: light.bedroom
        #      transition: 1800

        #- id: awake_scene
        #  alias: awake scene
        #  trigger: &night_off
        #    - platform: state
        #      entity_id: input_boolean.night
        #      to: 'off'
        #  action:
        #    - service: scene.turn_on
        #      data:
        #        entity_id: scene.awake
        #        transition: 15
        #- id: awake_scene_off
        #  alias: awake scene off
        #  trigger:
        #    - platform: state
        #      entity_id: input_boolean.night
        #      to: 'off'
        #      for: 00:05:00
        #  action:
        #    service: light.turn_off
        #    data:
        #      entity_id: light.bedroom
        #      transition: 60

